# 【HTTPS第1期】https原理解析
# 什么是https?
在说https之前，我们首先要了解什么是http。http是基于TCP/IP之上的用于客户端与服务端的一种无状态（无状态是指两个http请求之间是没有任何关系的）的通讯协议。http协议传输的数据是明文（未加密的），在传输数据中无法保障数据的安全性。为此，网景公司最早设计了SSL协议，用于保障传输数据的安全性，也就是我们现在讲的https。
# https验证原理
https在传输数据之前，首先，会先进行安全认证。具体如下：
![https验证原理](http://www.kuqin.com/upimg/allimg/110824/223Q04O7-0.png)

1. 客户端发起HTTPS请求

> 这个没什么好说的，就是用户在浏览器里输入一个https网址，然后连接到server的443端口。

2. 服务端的配置

> 采用HTTPS协议的服务器必须要有一套数字证书，可以自己制作，也可以向组织申请。区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面(startssl就是个不错的选择，有1年的免费服务)。这套证书其实就是一对公钥和私钥。如果对公钥和私钥不太理解，可以想象成一把钥匙和一个锁头，只是全世界只有你一个人有这把钥匙，你可以把锁头给别人，别人可以用这个锁把重要的东西锁起来，然后发给你，因为只有你一个人有这把钥匙，所以只有你才能看到被这把锁锁起来的东西。

3. 传送证书

> 这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间等等。

4. 客户端解析证书

> 这部分工作是有客户端的TLS来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。如果证书没有问题，那么就生成一个随即值。然后用证书对该随机值进行加密。就好像上面说的，把随机值用锁头锁起来，这样除非有钥匙，不然看不到被锁住的内容。

5. 传送加密信息

> 这部分传送的是用证书加密后的随机值，目的就是让服务端得到这个随机值，以后客户端和服务端的通信就可以通过这个随机值来进行加密解密了。

6. 服务端解密信息

> 服务端用私钥解密后，得到了客户端传过来的随机值(私钥)，然后把内容通过该值进行对称加密。所谓对称加密就是，将信息和私钥通过某种算法混合在一起，这样除非知道私钥，不然无法获取内容，而正好客户端和服务端都知道这个私钥，所以只要加密算法够彪悍，私钥够复杂，数据就够安全。

7. 传输加密后的信息

> 这部分信息是服务段用私钥加密后的信息，可以在客户端被还原

8. 客户端解密信息

> 客户端用之前生成的私钥解密服务段传过来的信息，于是获取了解密后的内容。整个过程第三方即使监听到了数据，也束手无策。


[原文](http://blog.csdn.net/sean_cd/article/details/6966130?spm=a2c4e.11153940.blogcont14420.4.2600ebc5TlCXcT)